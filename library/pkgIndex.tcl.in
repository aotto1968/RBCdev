# Tcl package index file, version 1.0

proc LoadRBC { version dir } {

    set prefix "%LIB_PREFIX%"
    set suffix [info sharedlibextension]
    regsub {\.} $version {} version_no_dots

    # Determine whether to load the full RBC library or
    # the "lite" tcl-only version.
    
    if { [info commands tk] == "tk" } {
        set name ${prefix}RBC${version_no_dots}${suffix}
    } else {
        set name ${prefix}RBClite${version_no_dots}${suffix}
    }
    
    global tcl_platform
    if { $tcl_platform(platform) == "unix" } {
	set library [file join $dir $name]
	if { ![file exists $library] } {
	    # Try the parent directory.
	    set library [file join [file dirname $dir] $name]
	}
	if { ![file exists $library] } {
	    # Default to the path generated at compilation.
	    set library [file join "%LIB_DIR%" $name]
	}
    } else {
	set library $name
    }
    load $library RBC
}

set version "%VERSION%"

package ifneeded RBC $version [list LoadRBC $version $dir]

# End of package index file
